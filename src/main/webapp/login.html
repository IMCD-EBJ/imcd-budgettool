<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="../assets/img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>IMCD</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
        name='viewport' />
    <!-- Favicon clÃ¡sico -->
    <link rel="icon" href="/budgettool/favicon.ico" sizes="any">
    <!-- Favicon vector -->
    <link rel="icon" type="image/svg+xml" href="/budgettool/favicon.svg">
    <!-- iOS / iPadOS -->
    <link rel="apple-touch-icon" href="/budgettool/apple-touch-icon.png">
    <!-- Manifest (opcional) -->
    <link rel="manifest" href="/budgettool/site.webmanifest">
    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
        integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <!-- Our Custom CSS -->
    <link rel="stylesheet" href="styles/style4.css">
    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js"
        integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ"
        crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js"
        integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY"
        crossorigin="anonymous"></script>


    <style>
        .containerOwnApp {
            box-shadow: 0 0 27px 0 rgba(84, 84, 84, 0.62);
            padding-top: 15px;
        }

        .login-page {
            padding: 18% 0 0;
            margin: 0 auto 100px;
            max-width: 360px;
            position: relative;
        }

        .login-form {
            box-shadow: 0 0 27px 0 rgba(84, 84, 84, 0.62);
        }

        .login-form-header {
            padding-top: 16px;
        }

        .login-from-row {
            padding-top: 16px;
            padding-bottom: 16px;
        }

        .login-form-font-header {
            font-size: 30px;
            font-weight: bold;
        }

        .login-form-font-header span {
            color: #007C9B;
        }
    </style>
</head>

<body>
<div id="section_header" style="display:none"></div>
    <div class="container">
        <div class="row text-center login-page">
            <div class="col-md-12 login-form">

                <div class="row">
                    <div class="col-md-12 login-form-header">
                        <img src="imgs/logo.jpg" width="50%">
                    </div>
                </div>
                <div id="without-ldap" class="row" style="display: none">
                    <div class="col-md-12 mt-2">
                        <span class="badge badge-warning">Authentication without LDAP</span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 login-from-row">
                        <input id="user" type="text" placeholder="User" required />
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 login-from-row">
                        <input id="password" type="password" placeholder="Password" required />
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 login-from-row">
                        <button class="btn btn-info" onclick="login()">Login</button>
                    </div>
                </div>

            </div>
        </div>
        <div class="row text-center">
            <p id="text-error" class="col-12 text-center"></p>
        </div>
    </div>

    <!--   Core JS Files   -->
    <script src="./js/core/jquery.3.2.1.min.js" type="text/javascript"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="./js/core/popper.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
    <script src="./js/core/bootstrap.min.js" type="text/javascript"></script>
    <script src="./js/core.js"></script>
    <script>
        $.get({
            url: URLBACKEND + "utils/configuration",
            type: 'Get'//,
            //timeout: 1000
        }).then(res => {
            const activeLdap = res.shift().CFG_ActiveLdap
            if (!Boolean(Number(activeLdap))) {
                $('#without-ldap').show()
            }
        }).catch(() => { });

        $.get({
            url: URLBACKEND + "utils/test-ldap-connection",
            type: 'Get'
        }).then(res => {
            $("#text-error").text($("#text-error").text() + ' ' + res);
        }).catch(() => { });
        /*
        $.get({
            url: URLBACKEND + "utils/test-mail-connection",
            type: 'Get'
        }).then(res => {
            $("#text-error").text($("#text-error").text() + ' ' + res);
        }).catch(() => { });*/

        $("#section_header").load(APP_URL+"/components/header.html");

    </script>
</body>

</html>
